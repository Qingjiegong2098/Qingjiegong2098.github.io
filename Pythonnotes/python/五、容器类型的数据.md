# 五、容器类型的数据

若我们想将多个数据打包并且统一管理，就需要一个容器。

Python内置的数据类型如序列（列表、元组等）、集合和字典等可以容纳多项数据，我们称它们为容器类型的数据。

## 1.序列

序列（sequence）是一种可迭代的、元素有序的容器类型的数据。

序列包括列表（list）、字符串（str）、元组（tuple）和字节序列（bytes）等。

### 1.1 序列的索引操作

序列中的元素都是有序的，每一个元素都带有序号，这个序号叫作索引。索引有正值索引和负值索引之分。

![正值索引](https://gitee.com/yibaiwan/image/raw/master/image/202202031409821.png)

![负值索引](https://gitee.com/yibaiwan/image/raw/master/image/202202031410073.png)

我们是通过下标运算符访问序列中的元素的，下标运算符是跟在容器数据后的一对中括号（[]），中括号带有参数，对于序列类型的数据，这个参数就是元素的索引序号。

![image-20220203141111213](https://gitee.com/yibaiwan/image/raw/master/image/202202031411268.png)

```python
>>> a='Hello'
>>> a[0]
'H'
>>> a[-5]
'H'
>>> a[4]
'o'
>>> a[-1]
'o'
>>> a[5]
Traceback (most recent call last):
  File "<pyshell#5>", line 1, in <module>
    a[5]
IndexError: string index out of range
# 若索引超出范围，则会发生IndexError错误
>>> max(a) # max()函数用于返回最后一个函数
'o'
>>> min(a) # min()函数用于返回第一个函数
'H'
>>> len(a) # len()函数用于获取序列的长度
5
>>> 
```

### 1.2 加和乘操作

加（+）和乘（*）运算符也可以用于序列中的元素操作。

加（+）运算符可以将两个序列连接起来，乘（*）运算符可以将两个序列重复多次。

![image-20220203141937736](https://gitee.com/yibaiwan/image/raw/master/image/202202031419814.png)

```python
>>> a='Hello'
>>> a * 2
'HelloHello'
>>> a *= 2
>>> a
'HelloHello'
>>> a = 'Hello' + ','
>>> a
'Hello,'
>>> a += 'World'
>>> a
'Hello,World'
>>> 
```

### 1.3 切片操作

序列的切片（Slicing）就是从序列中切分出小的子序列。

切片运算符的语法形式为[start：end：step]。其中，start是开始索引，end是结束索引，step是步长（切片时获取的元素的间隔，可以为正整数，也可以为负整数）。

**切下的小切片包括start位置的元素，但不包括end位置的元素，start和end都可以省略。**

对字符串变量a进行切片操作[1：3]，开始索引为1，结束索引为3，省略步长（默认值为1）。

![image-20220203142547600](https://gitee.com/yibaiwan/image/raw/master/image/202202031425683.png)

代码示例：

```python
>>> a = 'Hello'
>>> a[1:3]
'el'
>>> a[:3] #省略了开始索引，默认索引为0，所以以a[:3]与a[0:3]的切片结果是一样的
'Hel'
>>> a[0:3]
'Hel'
>>> a[0:] #省略了结束索引，默认结束索引为序列的长度，即5。
'Hello'
>>> a[0:5]
'Hello'
>>> a[:] #省略了start与end，a[:]与a[0:5]的结果是一样的
'Hello'
>>> a[1:-1] #使用了负值索引
'ell'
>>> 
```

面对字符串变量a进行切片操作[0：3：2]，开始索引为0，结束索 引为3，步长为2。

![image-20220203143729998](https://gitee.com/yibaiwan/image/raw/master/image/202202031437082.png)

代码示例：

```python
>>> a='world'
>>> a[1:5]
'orld'
>>> a[1:5:1]
'orld'
>>> a[1:5:2]
'ol'
>>> a[0:3]
'wor'
>>> a[0:3:2]
'wr'
>>> a[0:3:3]
'w'
>>> a[::-1] #步长为负值时，从右往左获取元素，所以[::-1]切片的结果是原始序列元素的倒置
'dlrow'
>>> 
```

### 1.4 成员测试

成员测试运算符有两个：in和not in，in用于测试是否包含某一个元素，not in用于测试是否不包含某一个元素。

```python
>>> a='World'
>>> 'r' in a
True
>>> 'R' not in a
True
>>> 
```

## 2.列表

列表（list）是一种可变序列类型，我们可以追加、插入、删除和替换列表中的元素。

### 2.1 创建列表

创建列表有两种方法。

 1 list（iterable）函数：参数iterable是可迭代对象（字符串、列表、元组、集合和字典等）。`list('Hello')`

 2 [元素1，元素2，元素3，⋯]：指定具体的列表元素，元素之间以逗号分隔，列表元素需要使用中括号括起来。`[11,13,45,56]`

```python
>>> [12,13,45,78]
[12, 13, 45, 78]
>>> []
[]
>>> ['Hello','World',1,2,3]
['Hello', 'World', 1, 2, 3]
>>> a=[10,]
>>> a
[10]
>>> list('Hello')
['H', 'e', 'l', 'l', 'o']
#通过list(iterable)函数创建列表对象，字符串是序列对象，创建的列表对象包含5个字符
```

## 2.2 追加元素

列表是可变的序列对象，列表可以追加元素。 

 1 在列表中追加单个元素时，可以使用列表的append（x）方法。

 2 在列表中追加多个元素时，可以使用加（+）运算符或列表的extend（t）方法。

```python
>>> list = [20,12,30,50]
>>> list.append(80) #在列表后面追加一个元素不能同时同时追加多个元素
>>> list
[20, 12, 30, 50, 80]
>>> list = [20,30,40,50]
>>> t = [1,2,3]
>>> list += t #使用+=运算符追加多个元素
>>> list
[20, 30, 40, 50, 1, 2, 3]
>>> list = [20,30,40,50]
>>> list.extend(t) #使用extend()方法追加多个元素
>>> list
[20, 30, 40, 50, 1, 2, 3]
>>> 
```

### 2.3 插入元素

想向列表中插入元素时，可以使用列表的list.insert（i，x）方法，其中，i指定索引位置，x是要插入的元素。

```python
>>> list = [20,30,50,60]
>>> list.insert(2,80)
#在索引2的位置插入一个元素，新的元素索引为2
>>> list
[20, 30, 80, 50, 60]
>>> 
```

### 2.4 替换元素

想替换列表中的元素时，将列表下标索引元素放在赋值符号（=）的左边，进行赋值即可。

```python
>>> list = [20,30,50,60]
>>> list[1] = 80
>>> list
[20, 80, 50, 60]
>>> 
```

### 2.5 删除元素

想在列表中删除元素时，可使用列表的list.remove（x）方法，如果找到匹配的元素x，则删除该元素，如果找到多个匹配的元素，则只删除第一个匹配的元素。

```python
>>> list = [20,30,50,80,50]
>>> list.remove(50)
>>> list
[20, 30, 80, 50]
>>> 
```

## 3.元组

元组（tuple）是一种不可变序列类型。

### 3.1 创建元组

创建元组时有两种方法。

 1 tuple（iterable）函数：参数iterable是可迭代对象（字符串、列表 、元组、集合和字典等）。`tuple([21,23,54,65])`

2 （元素1，元素2，元素3，⋯）：指定具体的元组元素，元素之间 以逗号分隔。对于元组元素，可以使用小括号括起来，也可以省略小括号。

`(21,23,54,65)`

**创建一个只有一个元素的元组，元素后面的逗号不能省略**，`t = (1,)`

### 3.2 元组拆包

创建元组，并将多个数据放到元组中，这个过程被称为元组打包。

与元组打包相反的操作是拆包，就是将元组中的元素取出，分别赋值给不同的变量。

![image-20220203163548197](https://gitee.com/yibaiwan/image/raw/master/image/202202031635317.png)

代码示例：

```python
>>> s_id,s_name = (102,'张三')
>>> s_id
102
>>> s_name
'张三'
>>> 
```

## 4.集合

集合（set）是一种可迭代的、**无序的**、不能包含重复元素的容器类型的数据。

### 4.1 创建集合

我们可以通过以下两种方式创建集合。

 1 set（iterable）函数：参数iterable是可迭代对象（字符串、列表、元组、集合和字典等）。`set('Hello')`

 2 {元素1，元素2，元素3，⋯}：指定具体的集合元素，元素之间以逗号分隔。对于集合元素，需要使用大括号括起来。`{20,12,53,65}`

```python
>>> set('Hello')
{'H', 'e', 'l', 'o'}
>>> {12,30,25,12,45,65,15}
{65, 25, 12, 45, 30, 15}
>>> b = {}
>>> type(b)
<class 'dict'>
>>> 
```

### 4.2 修改集合

add（elem）：添加元素，如果元素已经存在，则不能添加，不会抛出错误。 

remove（elem）：删除元素，如果元素不存在，则抛出错误。 

clear（）：清除集合。

代码示例：

```python
>>> s_set = {'张三','李四','王五'}
>>> s_set.add('东柳')
>>> s_set
{'张三', '李四', '王五', '东柳'}
>>> s_set.remove('李四')
>>> '李四' in s_set
False
>>> s_set
{'张三', '王五', '东柳'}
>>> s_set.clear()
>>> s_set
set()
>>> 
```

## 5.字典

字典（dict）是可迭代的、通过键（key）来访问元素的可变的容器类型的数据。

字典由两部分视图构成：键视图和值视图。**键视图不能包含重复的元素，值视图能**。在键视图中，键和值是成对出现的。

### 5.1 创建字典

我们可以通过以下两种方法创建字典。

1 dict（）函数。

2 {key1：value1，key2：value2，...，key_n：value_n}：指定具体的字典键值对，键值对之间以逗号分隔，最后用大括号括起来。

```python
>>> dict({102:'张三',105:'李四',109:'王五'})
#通过dict()函数创建字典，参数是另外一个字典
{102: '张三', 105: '李四', 109: '王五'}
>>> dict(((102,'张三'),(105,'李四'),(109,'王五')))
#参数是一个元组，在这个元组中要包含三个只有两个元素的元组
{102: '张三', 105: '李四', 109: '王五'}
>>> dict([(102,'张三'),(105,'李四'),(109,'王五')])
#参数是一个列表，在这个列表中包含三个只有两个元素的元组
{102: '张三', 105: '李四', 109: '王五'}
>>> dict(zip([102,105,109],['张三','李四','王五']))
#通过zip()函数将两个可迭代对象打包成元组，第一个参数是字典的键，第二个参数是字典值，他们包含的元素个数相同，并且一一对应
{102: '张三', 105: '李四', 109: '王五'}
>>> dict1 = {102: '张三', 105: '李四', 109: '王五'}
>>> dict1
{102: '张三', 105: '李四', 109: '王五'}
>>> dict1 = {}
>>> dict1
{}
>>> 
```

### 5.2 修改字典

 字典可以被修改，但都是针对键和值同时操作的，对字典的修改包 括添加、替换和删除。

```python
>>> dict1 = {102: '张三', 105: '李四', 109: '王五'}
>>> dict1[109] #通过字典返回对应的值
'王五'
>>> dict1[110] = '董六' #通过110键赋值，如果此时在字典中没有110键，则添加110:'董六'键值对
>>> dict1
{102: '张三', 105: '李四', 109: '王五', 110: '董六'}
>>> dict1[109] = '张三' #将109键对应的值替换为'张三'
>>> dict1
{102: '张三', 105: '李四', 109: '张三', 110: '董六'}
>>> dict1.pop(105) #使用字典的pop(key)方法删除键值对，返回删除的值
'李四'
>>> dict1
{102: '张三', 109: '张三', 110: '董六'}
>>> 
```

### 5.3 访问字典视图

我们可以通过字典中的三种方法访问字典视图。

items（）：返回字典的所有键值对视图。

keys（）：返回字典键视图。 

values（）：返回字典值视图。

```python
>>> dict1 = {102: '张三', 105: '李四', 109: '王五'}
>>> dict1.items() #返回字典的所有键值对视图dict_items
dict_items([(102, '张三'), (105, '李四'), (109, '王五')])
>>> dict1.keys() #返回字典键视图dict_keys
dict_keys([102, 105, 109])
>>> dict1.values() #返回字典值视图dict_values
dict_values(['张三', '李四', '王五'])
>>> 
```

## 6.遍历字典

```python
# coding=utf-8
s_dict = {102:'张三',105:'李四',109:'王五'}
print('---遍历键---')
for s_id in s_dict.keys():
    print('学号: ' + str(s_id))
print('---遍历值---')
for s_name in s_dict.values():
    print('学生: ' + s_name)
print('---遍历键:值---')
for s_id,s_name in s_dict.items():
    print('学号：{0} - 学生：{1}'.format(s_id,s_name))
```

结果：

![image-20220203194025459](https://gitee.com/yibaiwan/image/raw/master/image/202202031940581.png)



* 序列元素是有序的。其中列表是可变的，元组是不可变的。
* 集合元素是无序的，且不能重复。
* 字典通过键来访问元素，由键视图和值视图构成，键视图不能包含重复的元素。
